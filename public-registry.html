<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>PoArt Public Registry</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background: white; margin: 0; padding: 20px; }
        .loading { text-align: center; margin-top: 50px; color: #64748b; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { text-align: left; background: #f8fafc; padding: 12px; font-size: 12px; border-bottom: 2px solid #e2e8f0; }
        td { padding: 12px; border-bottom: 1px solid #e2e8f0; font-size: 14px; }
        .cert-id { color: #15803d; font-weight: bold; background: #dcfce7; padding: 4px 8px; border-radius: 4px; }
    </style>
</head>
<body>
    <h2>[PoArt] Güncel Kayıtlar</h2>
    <div id="content"><div class="loading">Bağlanılıyor...</div></div>

    <script>
        // SENİN PAYLAŞTIĞIN GÜNCEL BİLGİLER
        const S_URL = 'https://immdfdvrwqcvgmflbgdr.supabase.co';
        const S_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImltbWRmZHZyd3FjdmdtZmxiZ2RyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc4NzU0MTgsImV4cCI6MjA4MzQ1MTQxOH0.MN05h2FLVFb14P9Oi0y3g3euqZjzGdVslJay6aQ1HkE';
        
        const supabaseClient = supabase.createClient(S_URL, S_KEY);

        async function loadData() {
            const { data, error } = await supabaseClient
                .from('manifests')
                .select('*')
                .order('created_at', { ascending: false });

            if (error) {
                document.getElementById('content').innerHTML = "Hata: " + error.message;
                return;
            }

            if (data.length === 0) {
                document.getElementById('content').innerHTML = "Kayıt bulunamadı.";
                return;
            }

            let html = '<table><thead><tr><th>ID</th><th>Eser</th><th>Sanatçı</th></tr></thead><tbody>';
            data.forEach(item => {
                html += `<tr>
                    <td><span class="cert-id">${item.cert_id}</span></td>
                    <td><b>${item.title}</b></td>
                    <td>${item.creator}</td>
                </tr>`;
            });
            html += '</tbody></table>';
            document.getElementById('content').innerHTML = html;
        }

        loadData();
    </script>
</body>
</html>
